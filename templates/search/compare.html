{% extends 'base.html' %}
{% block title %}Karşılaştır{% endblock %}
{% block content %}
<div class="container mx-auto px-4 py-8">
  <h1 class="text-2xl font-bold mb-4">Karşılaştır</h1>
  {% if error %}
    <div class="mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-yellow-800">{{ error }}</div>
  {% endif %}
  {% if listings %}
  <div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Alan</th>
          {% for li in listings %}
          <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
            <a href="{% url 'listing_detail' li.id %}" class="text-brand-navy hover:text-brand-red">{{ li.title|truncatechars:40 }}</a>
          </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        <tr>
          <td class="px-4 py-2 font-medium">Kategori</td>
          {% for li in listings %}
          <td class="px-4 py-2">{{ li.product.category.name }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td class="px-4 py-2 font-medium">Marka</td>
          {% for li in listings %}
          <td class="px-4 py-2">{{ li.product.brand|default:'-' }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td class="px-4 py-2 font-medium">Durum</td>
          {% for li in listings %}
          <td class="px-4 py-2">{{ li.get_condition_display }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td class="px-4 py-2 font-medium">Fiyat</td>
          {% for li in listings %}
          <td class="px-4 py-2">{{ li.price }} {{ li.currency }}</td>
          {% endfor %}
        </tr>
        <tr>
          <td class="px-4 py-2 font-medium">Satıcı</td>
          {% for li in listings %}
          <td class="px-4 py-2">{{ li.store.name }}</td>
          {% endfor %}
        </tr>
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="text-gray-500">Karşılaştırma için ?ids=1,2,3,4 parametresi ile en fazla 4 ilan seçin.</div>
  {% endif %}
</div>
{% endblock %}



